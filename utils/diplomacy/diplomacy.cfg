#textdomain wesnoth-A_New_World

#define DIPLOMACY_ENABLE
    [event]
        name=prestart
        first_time_only=yes

        # Load diplomacy.lua (safe even if it does nothing yet)
        [lua]
            code=<< wesnoth.dofile "~add-ons/A_New_World/lua/diplomacy.lua"; diplomacy.init() >>
        [/lua]

        # --- Dummy right-click menu (no external state, WML-only) ---
        [set_menu_item]
            id=anw_diplomacy_dummy
            description= _ "Diplomacy"
            [filter_location]
                [filter]
                    canrecruit=yes
                    side=1
                [/filter]
            [/filter_location]
            [command]
                [message]
                    speaker=narrator
                    message= _ "Diplomacy (prototype)\n\nThis is a placeholder dialog to confirm the menu hook works. No data is read or written."
                    [option]
                        message= _ "OK"
                        [command]
                            # no-op
                        [/command]
                    [/option]
                [/message]
            [/command]
        [/set_menu_item]
        # --- end dummy menu ---

    [/event]
#enddef
